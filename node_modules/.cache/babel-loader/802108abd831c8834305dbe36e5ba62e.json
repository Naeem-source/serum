{"ast":null,"code":"import _toConsumableArray from\"/home/itxnaeem/Work-IDEO/Serumdex/serum/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/itxnaeem/Work-IDEO/Serumdex/serum/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/home/itxnaeem/Work-IDEO/Serumdex/serum/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import{InfoCircleOutlined,PlusCircleOutlined,SettingOutlined}from'@ant-design/icons';import{Button,Col,Menu,Popover,Row,Select}from'antd';import React,{useCallback,useEffect,useState}from'react';import{useHistory,useLocation}from'react-router-dom';import logo from\"../assets/logo.svg\";import styled from'styled-components';import{useWallet}from'../utils/wallet';import{ENDPOINTS,useConnectionConfig}from'../utils/connection';import Settings from'./Settings';import CustomClusterEndpointDialog from'./CustomClusterEndpointDialog';import{notify}from'../utils/notifications';import{Connection}from'@solana/web3.js';import WalletConnect from'./WalletConnect';import AppSearch from'./AppSearch';import{getTradePageUrl}from'../utils/markets';var Wrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  background-color: #0d1017;\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: flex-end;\\n  padding: 0px 30px;\\n  flex-wrap: wrap;\\n\"])));var LogoWrapper=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  color: #2abdd2;\\n  font-weight: bold;\\n  cursor: pointer;\\n  img {\\n    height: 30px;\\n    margin-right: 8px;\\n  }\\n\"])));var EXTERNAL_LINKS={'/learn':'https://docs.projectserum.com/trade-on-serum-dex/trade-on-serum-dex-1','/add-market':'https://serum-academy.com/en/add-market/','/wallet-support':'https://serum-academy.com/en/wallet-support','/dex-list':'https://serum-academy.com/en/dex-list/','/developer-resources':'https://serum-academy.com/en/developer-resources/','/explorer':'https://solscan.io','/srm-faq':'https://projectserum.com/srm-faq'};export default function TopBar(){var _useWallet=useWallet(),connected=_useWallet.connected,wallet=_useWallet.wallet;var _useConnectionConfig=useConnectionConfig(),endpoint=_useConnectionConfig.endpoint,endpointInfo=_useConnectionConfig.endpointInfo,setEndpoint=_useConnectionConfig.setEndpoint,availableEndpoints=_useConnectionConfig.availableEndpoints,setCustomEndpoints=_useConnectionConfig.setCustomEndpoints;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),addEndpointVisible=_useState2[0],setAddEndpointVisible=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),testingConnection=_useState4[0],setTestingConnection=_useState4[1];var location=useLocation();var history=useHistory();var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),searchFocussed=_useState6[0],setSearchFocussed=_useState6[1];var handleClick=useCallback(function(e){if(!(e.key in EXTERNAL_LINKS)){history.push(e.key);}},[history]);var onAddCustomEndpoint=function onAddCustomEndpoint(info){var existingEndpoint=availableEndpoints.some(function(e){return e.endpoint===info.endpoint;});if(existingEndpoint){notify({message:\"An endpoint with the given url already exists\",type:'error'});return;}var handleError=function handleError(e){console.log(\"Connection to \".concat(info.endpoint,\" failed: \").concat(e));notify({message:\"Failed to connect to \".concat(info.endpoint),type:'error'});};try{var connection=new Connection(info.endpoint,'recent');connection.getEpochInfo().then(function(result){setTestingConnection(true);console.log(\"testing connection to \".concat(info.endpoint));var newCustomEndpoints=[].concat(_toConsumableArray(availableEndpoints.filter(function(e){return e.custom;})),[info]);setEndpoint(info.endpoint);setCustomEndpoints(newCustomEndpoints);}).catch(handleError);}catch(e){handleError(e);}finally{setTestingConnection(false);}};var endpointInfoCustom=endpointInfo&&endpointInfo.custom;useEffect(function(){var handler=function handler(){if(endpointInfoCustom){setEndpoint(ENDPOINTS[0].endpoint);}};window.addEventListener('beforeunload',handler);return function(){return window.removeEventListener('beforeunload',handler);};},[endpointInfoCustom,setEndpoint]);var tradePageUrl=location.pathname.startsWith('/market/')?location.pathname:getTradePageUrl();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(CustomClusterEndpointDialog,{visible:addEndpointVisible,testingConnection:testingConnection,onAddCustomEndpoint:onAddCustomEndpoint,onClose:function onClose(){return setAddEndpointVisible(false);}}),/*#__PURE__*/React.createElement(Wrapper,null,/*#__PURE__*/React.createElement(LogoWrapper,{onClick:function onClick(){return history.push(tradePageUrl);}},/*#__PURE__*/React.createElement(\"img\",{src:logo,alt:\"\"}),'SERUM'),/*#__PURE__*/React.createElement(Menu,{mode:\"horizontal\",onClick:handleClick,selectedKeys:[location.pathname],style:{borderBottom:'none',backgroundColor:'transparent',display:'flex',alignItems:'flex-end',flex:1}},/*#__PURE__*/React.createElement(Menu.Item,{key:tradePageUrl,style:{margin:'0 10px 0 20px'}},\"TRADE\"),connected&&(!searchFocussed||location.pathname==='/balances')&&/*#__PURE__*/React.createElement(Menu.Item,{key:\"/balances\",style:{margin:'0 10px'}},\"BALANCES\"),connected&&(!searchFocussed||location.pathname==='/orders')&&/*#__PURE__*/React.createElement(Menu.Item,{key:\"/orders\",style:{margin:'0 10px'}},\"ORDERS\"),connected&&(!searchFocussed||location.pathname==='/convert')&&/*#__PURE__*/React.createElement(Menu.Item,{key:\"/convert\",style:{margin:'0 10px'}},\"CONVERT\"),(!searchFocussed||location.pathname==='/list-new-market')&&/*#__PURE__*/React.createElement(Menu.Item,{key:\"/list-new-market\",style:{margin:'0 10px'}},\"ADD MARKET\"),!searchFocussed&&/*#__PURE__*/React.createElement(Menu.SubMenu,{title:\"LEARN\",onTitleClick:function onTitleClick(){return window.open(EXTERNAL_LINKS['/learn'],'_blank');},style:{margin:'0 0px 0 10px'}},/*#__PURE__*/React.createElement(Menu.Item,{key:\"/add-market\"},/*#__PURE__*/React.createElement(\"a\",{href:EXTERNAL_LINKS['/add-market'],target:\"_blank\",rel:\"noopener noreferrer\"},\"Adding a market\")),/*#__PURE__*/React.createElement(Menu.Item,{key:\"/wallet-support\"},/*#__PURE__*/React.createElement(\"a\",{href:EXTERNAL_LINKS['/wallet-support'],target:\"_blank\",rel:\"noopener noreferrer\"},\"Supported wallets\")),/*#__PURE__*/React.createElement(Menu.Item,{key:\"/dex-list\"},/*#__PURE__*/React.createElement(\"a\",{href:EXTERNAL_LINKS['/dex-list'],target:\"_blank\",rel:\"noopener noreferrer\"},\"DEX list\")),/*#__PURE__*/React.createElement(Menu.Item,{key:\"/developer-resources\"},/*#__PURE__*/React.createElement(\"a\",{href:EXTERNAL_LINKS['/developer-resources'],target:\"_blank\",rel:\"noopener noreferrer\"},\"Developer resources\")),/*#__PURE__*/React.createElement(Menu.Item,{key:\"/explorer\"},/*#__PURE__*/React.createElement(\"a\",{href:EXTERNAL_LINKS['/explorer'],target:\"_blank\",rel:\"noopener noreferrer\"},\"Solana block explorer\")),/*#__PURE__*/React.createElement(Menu.Item,{key:\"/srm-faq\"},/*#__PURE__*/React.createElement(\"a\",{href:EXTERNAL_LINKS['/srm-faq'],target:\"_blank\",rel:\"noopener noreferrer\"},\"SRM FAQ\")))),/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',alignItems:'center',paddingRight:5}},/*#__PURE__*/React.createElement(AppSearch,{onFocus:function onFocus(){return setSearchFocussed(true);},onBlur:function onBlur(){return setSearchFocussed(false);},focussed:searchFocussed,width:searchFocussed?'350px':'35px'})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Row,{align:\"middle\",style:{paddingLeft:5,paddingRight:5},gutter:16},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(PlusCircleOutlined,{style:{color:'#2abdd2'},onClick:function onClick(){return setAddEndpointVisible(true);}})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Popover,{content:endpoint,placement:\"bottomRight\",title:\"URL\",trigger:\"hover\"},/*#__PURE__*/React.createElement(InfoCircleOutlined,{style:{color:'#2abdd2'}}))),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Select,{onSelect:setEndpoint,value:endpoint,style:{marginRight:8,width:'150px'}},availableEndpoints.map(function(_ref){var name=_ref.name,endpoint=_ref.endpoint;return/*#__PURE__*/React.createElement(Select.Option,{value:endpoint,key:endpoint},name);}))))),connected&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Popover,{content:/*#__PURE__*/React.createElement(Settings,{autoApprove:wallet===null||wallet===void 0?void 0:wallet.autoApprove}),placement:\"bottomRight\",title:\"Settings\",trigger:\"click\"},/*#__PURE__*/React.createElement(Button,{style:{marginRight:8}},/*#__PURE__*/React.createElement(SettingOutlined,null),\"Settings\"))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(WalletConnect,null))));}","map":{"version":3,"sources":["/home/itxnaeem/Work-IDEO/Serumdex/serum/src/components/TopBar.tsx"],"names":["InfoCircleOutlined","PlusCircleOutlined","SettingOutlined","Button","Col","Menu","Popover","Row","Select","React","useCallback","useEffect","useState","useHistory","useLocation","styled","useWallet","ENDPOINTS","useConnectionConfig","Settings","CustomClusterEndpointDialog","notify","Connection","WalletConnect","AppSearch","getTradePageUrl","Wrapper","div","LogoWrapper","EXTERNAL_LINKS","TopBar","connected","wallet","endpoint","endpointInfo","setEndpoint","availableEndpoints","setCustomEndpoints","addEndpointVisible","setAddEndpointVisible","testingConnection","setTestingConnection","location","history","searchFocussed","setSearchFocussed","handleClick","e","key","push","onAddCustomEndpoint","info","existingEndpoint","some","message","type","handleError","console","log","connection","getEpochInfo","then","result","newCustomEndpoints","filter","custom","catch","endpointInfoCustom","handler","window","addEventListener","removeEventListener","tradePageUrl","pathname","startsWith","logo","borderBottom","backgroundColor","display","alignItems","flex","margin","open","paddingRight","paddingLeft","color","marginRight","width","map","name","autoApprove"],"mappings":"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","sourcesContent":["import {\n  InfoCircleOutlined,\n  PlusCircleOutlined,\n  SettingOutlined,\n} from '@ant-design/icons';\nimport { Button, Col, Menu, Popover, Row, Select } from 'antd';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport logo from '../assets/logo.svg';\nimport styled from 'styled-components';\nimport { useWallet } from '../utils/wallet';\nimport { ENDPOINTS, useConnectionConfig } from '../utils/connection';\nimport Settings from './Settings';\nimport CustomClusterEndpointDialog from './CustomClusterEndpointDialog';\nimport { EndpointInfo } from '../utils/types';\nimport { notify } from '../utils/notifications';\nimport { Connection } from '@solana/web3.js';\nimport WalletConnect from './WalletConnect';\nimport AppSearch from './AppSearch';\nimport { getTradePageUrl } from '../utils/markets';\n\nconst Wrapper = styled.div`\n  background-color: #0d1017;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  padding: 0px 30px;\n  flex-wrap: wrap;\n`;\nconst LogoWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  color: #2abdd2;\n  font-weight: bold;\n  cursor: pointer;\n  img {\n    height: 30px;\n    margin-right: 8px;\n  }\n`;\n\nconst EXTERNAL_LINKS = {\n  '/learn': 'https://docs.projectserum.com/trade-on-serum-dex/trade-on-serum-dex-1',\n  '/add-market': 'https://serum-academy.com/en/add-market/',\n  '/wallet-support': 'https://serum-academy.com/en/wallet-support',\n  '/dex-list': 'https://serum-academy.com/en/dex-list/',\n  '/developer-resources': 'https://serum-academy.com/en/developer-resources/',\n  '/explorer': 'https://solscan.io',\n  '/srm-faq': 'https://projectserum.com/srm-faq',\n};\n\nexport default function TopBar() {\n  const { connected, wallet } = useWallet();\n  const {\n    endpoint,\n    endpointInfo,\n    setEndpoint,\n    availableEndpoints,\n    setCustomEndpoints,\n  } = useConnectionConfig();\n  const [addEndpointVisible, setAddEndpointVisible] = useState(false);\n  const [testingConnection, setTestingConnection] = useState(false);\n  const location = useLocation();\n  const history = useHistory();\n  const [searchFocussed, setSearchFocussed] = useState(false);\n\n  const handleClick = useCallback(\n    (e) => {\n      if (!(e.key in EXTERNAL_LINKS)) {\n        history.push(e.key);\n      }\n    },\n    [history],\n  );\n\n  const onAddCustomEndpoint = (info: EndpointInfo) => {\n    const existingEndpoint = availableEndpoints.some(\n      (e) => e.endpoint === info.endpoint,\n    );\n    if (existingEndpoint) {\n      notify({\n        message: `An endpoint with the given url already exists`,\n        type: 'error',\n      });\n      return;\n    }\n\n    const handleError = (e) => {\n      console.log(`Connection to ${info.endpoint} failed: ${e}`);\n      notify({\n        message: `Failed to connect to ${info.endpoint}`,\n        type: 'error',\n      });\n    };\n\n    try {\n      const connection = new Connection(info.endpoint, 'recent');\n      connection\n        .getEpochInfo()\n        .then((result) => {\n          setTestingConnection(true);\n          console.log(`testing connection to ${info.endpoint}`);\n          const newCustomEndpoints = [\n            ...availableEndpoints.filter((e) => e.custom),\n            info,\n          ];\n          setEndpoint(info.endpoint);\n          setCustomEndpoints(newCustomEndpoints);\n        })\n        .catch(handleError);\n    } catch (e) {\n      handleError(e);\n    } finally {\n      setTestingConnection(false);\n    }\n  };\n\n  const endpointInfoCustom = endpointInfo && endpointInfo.custom;\n  useEffect(() => {\n    const handler = () => {\n      if (endpointInfoCustom) {\n        setEndpoint(ENDPOINTS[0].endpoint);\n      }\n    };\n    window.addEventListener('beforeunload', handler);\n    return () => window.removeEventListener('beforeunload', handler);\n  }, [endpointInfoCustom, setEndpoint]);\n\n  const tradePageUrl = location.pathname.startsWith('/market/')\n    ? location.pathname\n    : getTradePageUrl();\n\n  return (\n    <>\n      <CustomClusterEndpointDialog\n        visible={addEndpointVisible}\n        testingConnection={testingConnection}\n        onAddCustomEndpoint={onAddCustomEndpoint}\n        onClose={() => setAddEndpointVisible(false)}\n      />\n      <Wrapper>\n        <LogoWrapper onClick={() => history.push(tradePageUrl)}>\n          <img src={logo} alt=\"\" />\n          {'SERUM'}\n        </LogoWrapper>\n        <Menu\n          mode=\"horizontal\"\n          onClick={handleClick}\n          selectedKeys={[location.pathname]}\n          style={{\n            borderBottom: 'none',\n            backgroundColor: 'transparent',\n            display: 'flex',\n            alignItems: 'flex-end',\n            flex: 1,\n          }}\n        >\n          <Menu.Item key={tradePageUrl} style={{ margin: '0 10px 0 20px' }}>\n            TRADE\n          </Menu.Item>\n          {connected && (!searchFocussed || location.pathname === '/balances') && (\n            <Menu.Item key=\"/balances\" style={{ margin: '0 10px' }}>\n              BALANCES\n            </Menu.Item>\n          )}\n          {connected && (!searchFocussed || location.pathname === '/orders') && (\n            <Menu.Item key=\"/orders\" style={{ margin: '0 10px' }}>\n              ORDERS\n            </Menu.Item>\n          )}\n          {connected && (!searchFocussed || location.pathname === '/convert') && (\n            <Menu.Item key=\"/convert\" style={{ margin: '0 10px' }}>\n              CONVERT\n            </Menu.Item>\n          )}\n          {(!searchFocussed || location.pathname === '/list-new-market') && (\n            <Menu.Item key=\"/list-new-market\" style={{ margin: '0 10px' }}>\n              ADD MARKET\n            </Menu.Item>\n          )}\n          {!searchFocussed && (\n            <Menu.SubMenu\n              title=\"LEARN\"\n              onTitleClick={() =>\n                window.open(EXTERNAL_LINKS['/learn'], '_blank')\n              }\n              style={{ margin: '0 0px 0 10px' }}\n            >\n              <Menu.Item key=\"/add-market\">\n                <a\n                  href={EXTERNAL_LINKS['/add-market']}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  Adding a market\n                </a>\n              </Menu.Item>\n              <Menu.Item key=\"/wallet-support\">\n                <a\n                  href={EXTERNAL_LINKS['/wallet-support']}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  Supported wallets\n                </a>\n              </Menu.Item>\n              <Menu.Item key=\"/dex-list\">\n                <a\n                  href={EXTERNAL_LINKS['/dex-list']}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  DEX list\n                </a>\n              </Menu.Item>\n              <Menu.Item key=\"/developer-resources\">\n                <a\n                  href={EXTERNAL_LINKS['/developer-resources']}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  Developer resources\n                </a>\n              </Menu.Item>\n              <Menu.Item key=\"/explorer\">\n                <a\n                  href={EXTERNAL_LINKS['/explorer']}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  Solana block explorer\n                </a>\n              </Menu.Item>\n              <Menu.Item key=\"/srm-faq\">\n                <a\n                  href={EXTERNAL_LINKS['/srm-faq']}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  SRM FAQ\n                </a>\n              </Menu.Item>\n            </Menu.SubMenu>\n          )}\n        </Menu>\n        <div\n          style={{\n            display: 'flex',\n            alignItems: 'center',\n            paddingRight: 5,\n          }}\n        >\n          <AppSearch\n            onFocus={() => setSearchFocussed(true)}\n            onBlur={() => setSearchFocussed(false)}\n            focussed={searchFocussed}\n            width={searchFocussed ? '350px' : '35px'}\n          />\n        </div>\n        <div>\n          <Row\n            align=\"middle\"\n            style={{ paddingLeft: 5, paddingRight: 5 }}\n            gutter={16}\n          >\n            <Col>\n              <PlusCircleOutlined\n                style={{ color: '#2abdd2' }}\n                onClick={() => setAddEndpointVisible(true)}\n              />\n            </Col>\n            <Col>\n              <Popover\n                content={endpoint}\n                placement=\"bottomRight\"\n                title=\"URL\"\n                trigger=\"hover\"\n              >\n                <InfoCircleOutlined style={{ color: '#2abdd2' }} />\n              </Popover>\n            </Col>\n            <Col>\n              <Select\n                onSelect={setEndpoint}\n                value={endpoint}\n                style={{ marginRight: 8, width: '150px' }}\n              >\n                {availableEndpoints.map(({ name, endpoint }) => (\n                  <Select.Option value={endpoint} key={endpoint}>\n                    {name}\n                  </Select.Option>\n                ))}\n              </Select>\n            </Col>\n          </Row>\n        </div>\n        {connected && (\n          <div>\n            <Popover\n              content={<Settings autoApprove={wallet?.autoApprove} />}\n              placement=\"bottomRight\"\n              title=\"Settings\"\n              trigger=\"click\"\n            >\n              <Button style={{ marginRight: 8 }}>\n                <SettingOutlined />\n                Settings\n              </Button>\n            </Popover>\n          </div>\n        )}\n        <div>\n          <WalletConnect />\n        </div>\n      </Wrapper>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}